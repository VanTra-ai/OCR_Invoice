<label-panel>
    <style>
        .li-fpoints{
            margin: 5px 0px;
            border-radius: 6px;
            width: 100%;
            list-style: none;
        }
        .drag-handler{
            width : 20%;
            background-color: lightgray;
            cursor: move;
        }
        #fpoints-list { list-style-type: none; margin: 0; padding: 0; margin-bottom: 10px; }
        #feature-points-list {
            margin-top: 10px;
            overflow-x: hidden;
        }
        .sortable-placeholder {
            margin: 5px 0px;
            padding:10px;
            background:yellow;
            color: black;
        }

        .selectedPoint{
            width : 20%;
            background-color: #17a2b8;
            cursor: move;
        }

        #category-select-box{
            background-color: white;
            width: 100%;
        }
        .es-list{
            color: #101010;
        }

        .animated {
          -webkit-animation-duration: 800ms;
          animation-duration: 800ms;
          -webkit-animation-fill-mode: both;
          animation-fill-mode: both;
        }

        @-webkit-keyframes slideOutRight {
          from {
            -webkit-transform: translate3d(0, 0, 0);
            transform: translate3d(0, 0, 0); }
          to {
            visibility: hidden;
            -webkit-transform: translate3d(100%, 0, 0);
            transform: translate3d(100%, 0, 0); }
        }

        @keyframes slideOutRight {
          from {
            -webkit-transform: translate3d(0, 0, 0);
            transform: translate3d(0, 0, 0); }
          to {
            visibility: hidden;
            -webkit-transform: translate3d(100%, 0, 0);
            transform: translate3d(100%, 0, 0); }
        }

        .slideOutRight {
          -webkit-animation-name: slideOutRight;
          animation-name: slideOutRight;
        }

        .input-group-btn{
          cursor: pointer
        }

    </style>
    <div class="d-flex flex-column" style="height: 100%;">
        <div ref="category-data" class="mb-2 mt-2">
            Category Name
            <select id="category-select-box" class="form-text">
                <option each={category in suggestedCategories} selected={category === targetShape.category}>{category}</option>
            </select>
        </div>
        <div ref="label-data" class="mb-2 mt-2">
            Label Name
            <input type="text" class="form-text w-100" value="{ targetShape.label }" onchange={updateLabel} placeholder="Label the shape, Eg: face, clock ..">
        </div>
    </div>
    <script>
        var tag = this;
        tag.targetShape = getShape(this.opts.id);
        tag.tags = tag.targetShape.tags.join(", ");

        tag.updateLabel = function(e){
            tag.targetShape.label = e.target.value;
        }

        tag.on('mount',function(){
            $("#category-select-box")
                .editableSelect()
                .on('select.editable-select', function (e, li) {
                    //console.log(li.val() ,",", li.text() );
                    //Update Category
                    tag.targetShape.category = li.text().toLowerCase();
                });

            $("#category-select-box").on('keyup', function(e){
                //Add
                var val = $(this).val().toLowerCase();
                if(e.keyCode === 13 && suggestedCategories.indexOf(val) === -1){
                    $("#category-select-box").editableSelect('add', val, 0);
                    suggestedCategories.push(val);
                    tag.targetShape.category = val;
                }
            });

            // Make sure panel label is always empty on init of work area
            eventBus.on('unmountLabelPanel', () => {
                // Must pass in true to only unmount the children
                tag.unmount(true);
            })

            // Use event bus to listen to removeTag events
            eventBus.on('removeLabelPanelTag', () => {
                tag.targetShape = getShape(tag.opts.id);
                // Unmount when targetShape is removed
                if (!tag.targetShape) {
                    // Must pass in true to only unmount the children
                    tag.unmount(true);
                } else {
                    tag.update();
                }
            });
        })

        tag.on('unmount', function() {
            eventBus.off('removeLabelPanelTag');
            eventBus.off('unmountLabelPanel');
        })
    </script>
</label-panel>
